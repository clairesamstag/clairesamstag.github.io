<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Sunshine Farm with Pigeons</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/aframe/1.4.2/aframe.min.js"></script>
  <script>
    // Click to teleport component
    AFRAME.registerComponent('click-to-move', {
      init: function() {
        const el = this.el;
        const rig = document.querySelector('#rig');
        
        el.addEventListener('click', function(evt) {
          if (evt.detail.intersection) {
            const point = evt.detail.intersection.point;
            rig.setAttribute('position', {
              x: point.x,
              y: 0,
              z: point.z
            });
          }
        });
      }
    });

    // Simple animation component for animals
    AFRAME.registerComponent('wander', {
      schema: {
        speed: {default: 0.3},
        range: {default: 10}
      },
      init: function() {
        this.dirX = (Math.random() - 0.5) * this.data.speed;
        this.dirZ = (Math.random() - 0.5) * this.data.speed;
        this.startPos = this.el.getAttribute('position');
        this.time = 0;
      },
      tick: function(time, deltaTime) {
        this.time += deltaTime;
        if (this.time > 3000) {
          this.dirX = (Math.random() - 0.5) * this.data.speed;
          this.dirZ = (Math.random() - 0.5) * this.data.speed;
          this.time = 0;
        }
        
        let pos = this.el.getAttribute('position');
        pos.x += this.dirX;
        pos.z += this.dirZ;
        
        const dist = Math.sqrt(
          Math.pow(pos.x - this.startPos.x, 2) + 
          Math.pow(pos.z - this.startPos.z, 2)
        );
        
        if (dist > this.data.range) {
          this.dirX *= -1;
          this.dirZ *= -1;
        }
        
        this.el.setAttribute('position', pos);
      }
    });
  </script>
  <style>
    body { margin: 0; overflow: hidden; }
    #instructions {
      position: absolute;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.85);
      color: white;
      padding: 20px 30px;
      border-radius: 15px;
      font-family: Arial, sans-serif;
      z-index: 1000;
      text-align: center;
      line-height: 1.8;
      max-width: 650px;
    }
  </style>
</head>
<body>
  <div id="instructions">
    üöú <strong>Welcome to Sunshine Farm with Pigeons!</strong><br>
    <strong>Click on ground to teleport</strong> | Drag mouse to look around<br>
    Explore the corn maze, meet all the animals and pigeons! üê¶
  </div>

  <a-scene>
    <!-- Sky -->
    <a-sky color="#87CEEB"></a-sky>
    
    <!-- Sun -->
    <a-sphere position="50 40 -30" radius="8" color="#FDB813"></a-sphere>
    
    <!-- Lighting -->
    <a-light type="ambient" color="#BBB"></a-light>
    <a-light type="directional" color="#FFF" intensity="0.6" position="5 10 7"></a-light>

    <!-- Ground - Massive grassy field -->
    <a-plane position="0 0 0" rotation="-90 0 0" width="300" height="300" color="#4CAF50" click-to-move></a-plane>
    
    <!-- Dirt paths -->
    <a-box position="0 0.01 -20" width="4" height="0.02" depth="80" color="#8B7355"></a-box>
    <a-box position="20 0.01 0" width="80" height="0.02" depth="4" color="#8B7355"></a-box>
    
    <!-- Red Barn -->
    <a-box position="-30 5 -30" width="15" height="10" depth="12" color="#8B0000"></a-box>
    <a-cone position="-30 11 -30" radius-bottom="9" radius-top="0.5" height="4" color="#600000" rotation="0 45 0"></a-cone>
    <a-box position="-30 3 -24.5" width="4" height="6" depth="0.5" color="#654321"></a-box>
    
    <!-- Silo -->
    <a-cylinder position="-20 7.5 -32" radius="3" height="15" color="#CCCCCC"></a-cylinder>
    <a-cone position="-20 15.5 -32" radius-bottom="3.5" radius-top="0.3" height="3" color="#8B0000"></a-cone>

    <!-- Wooden Fences -->
    <a-entity position="-10 0 -15">
      <a-box position="0 1 0" width="0.3" height="2" depth="0.3" color="#8B4513"></a-box>
      <a-box position="3 1 0" width="0.3" height="2" depth="0.3" color="#8B4513"></a-box>
      <a-box position="1.5 1.5 0" width="3" height="0.2" depth="0.2" color="#8B4513"></a-box>
      <a-box position="1.5 0.7 0" width="3" height="0.2" depth="0.2" color="#8B4513"></a-box>
    </a-entity>

    <!-- Corn Maze -->
    <a-entity position="30 0 -40">
      <!-- Corn rows creating maze -->
      <a-box position="0 1.5 0" width="2" height="3" depth="30" color="#FFD700"></a-box>
      <a-box position="5 1.5 5" width="2" height="3" depth="20" color="#FFD700"></a-box>
      <a-box position="10 1.5 0" width="2" height="3" depth="30" color="#FFD700"></a-box>
      <a-box position="7.5 1.5 -10" width="10" height="3" depth="2" color="#FFD700"></a-box>
      <a-box position="15 1.5 5" width="2" height="3" depth="20" color="#FFD700"></a-box>
      <a-box position="12.5 1.5 10" width="8" height="3" depth="2" color="#FFD700"></a-box>
    </a-entity>

    <!-- Hay Bales -->
    <a-cylinder position="-25 1 -20" radius="1.5" height="2" color="#DEB887" rotation="0 0 90"></a-cylinder>
    <a-cylinder position="-22 1 -20" radius="1.5" height="2" color="#DEB887" rotation="0 0 90"></a-cylinder>
    <a-cylinder position="-23.5 3 -20" radius="1.5" height="2" color="#DEB887" rotation="0 0 90"></a-cylinder>

    <!-- Water Trough -->
    <a-box position="-15 0.5 -25" width="4" height="1" depth="1.5" color="#4682B4"></a-box>

    <!-- YOUR PHOTOGRAMMETRY PIGEONS! -->
    <!-- Pigeon near barn -->
    <a-entity 
      gltf-model="url(https://raw.githubusercontent.com/clairesamstag/farmscene/main/11_2_2025.glb)"
      position="-28 0.5 -22"
      scale="0.5 0.5 0.5"
      rotation="0 45 0">
    </a-entity>

    <!-- Pigeon on fence post -->
    <a-entity 
      gltf-model="url(https://raw.githubusercontent.com/clairesamstag/farmscene/main/11_2_2025.glb)"
      position="-10 2.5 -15"
      scale="0.5 0.5 0.5"
      rotation="0 -90 0">
    </a-entity>

    <!-- Pigeon on ground near hay -->
    <a-entity 
      gltf-model="url(https://raw.githubusercontent.com/clairesamstag/farmscene/main/11_2_2025.glb)"
      position="-20 0.5 -18"
      scale="0.5 0.5 0.5"
      rotation="0 120 0">
    </a-entity>

    <!-- Pigeon near water trough -->
    <a-entity 
      gltf-model="url(https://raw.githubusercontent.com/clairesamstag/farmscene/main/11_2_2025.glb)"
      position="-17 0.5 -26"
      scale="0.5 0.5 0.5"
      rotation="0 -45 0">
    </a-entity>

    <!-- Pigeon in the field -->
    <a-entity 
      gltf-model="url(https://raw.githubusercontent.com/clairesamstag/farmscene/main/11_2_2025.glb)"
      position="5 0.5 -10"
      scale="0.5 0.5 0.5"
      rotation="0 180 0">
    </a-entity>

    <!-- FARM ANIMALS -->
    <!-- Cows -->
    <a-entity position="-15 0 -30" wander="speed: 0.2; range: 8">
      <a-box position="0 1 0" width="2" height="1.5" depth="3" color="#8B4513"></a-box>
      <a-box position="0 2 1" width="1.2" height="1.2" depth="1.5" color="#8B4513"></a-box>
      <a-cylinder position="-0.3 2.8 1.3" radius="0.15" height="0.6" color="#8B4513"></a-cylinder>
      <a-cylinder position="0.3 2.8 1.3" radius="0.15" height="0.6" color="#8B4513"></a-cylinder>
      <a-sphere position="0 2 1.8" radius="0.3" color="#FFB6C1"></a-sphere>
    </a-entity>

    <!-- Horses -->
    <a-entity position="10 0 -20" wander="speed: 0.25; range: 12">
      <a-box position="0 1.5 0" width="1.5" height="2" depth="3" color="#654321"></a-box>
      <a-box position="0 2.5 1.2" width="1" height="1.5" depth="1.8" color="#654321"></a-box>
      <a-box position="0 3.5 1.8" radius="0.6" height="0.8" color="#654321"></a-box>
      <a-cylinder position="0 3.8 2" radius="0.2" height="0.8" color="#4B3621"></a-cylinder>
    </a-entity>

    <!-- Pigs -->
    <a-entity position="-20 0 -15" wander="speed: 0.15; range: 6">
      <a-box position="0 0.6 0" width="1.5" height="1" depth="2" color="#FFC0CB"></a-box>
      <a-box position="0 0.9 0.9" width="1" height="0.8" depth="1" color="#FFC0CB"></a-box>
      <a-sphere position="0 0.9 1.5" radius="0.3" color="#FFB6C1"></a-sphere>
      <a-cylinder position="0 0.3 -0.9" radius="0.1" height="0.4" color="#FFC0CB" rotation="20 0 0"></a-cylinder>
    </a-entity>

    <!-- Piglets -->
    <a-entity position="-22 0 -14" wander="speed: 0.2; range: 4">
      <a-box position="0 0.35 0" width="0.8" height="0.6" depth="1" color="#FFC0CB"></a-box>
      <a-sphere position="0 0.5 0.6" radius="0.2" color="#FFB6C1"></a-sphere>
    </a-entity>

    <!-- Donkeys -->
    <a-entity position="15 0 -35" wander="speed: 0.18; range: 10">
      <a-box position="0 1.3 0" width="1.3" height="1.8" depth="2.5" color="#696969"></a-box>
      <a-box position="0 2 1" width="0.9" height="1.3" depth="1.5" color="#696969"></a-box>
      <a-cylinder position="-0.2 3 1.3" radius="0.15" height="0.8" color="#696969"></a-cylinder>
      <a-cylinder position="0.2 3 1.3" radius="0.15" height="0.8" color="#696969"></a-cylinder>
    </a-entity>

    <!-- Chickens -->
    <a-entity position="-25 0 -28" wander="speed: 0.3; range: 5">
      <a-sphere position="0 0.4 0" radius="0.4" color="#FFFFFF"></a-sphere>
      <a-sphere position="0 0.7 0.2" radius="0.25" color="#FFFFFF"></a-sphere>
      <a-cone position="0 0.7 0.5" radius-bottom="0.1" radius-top="0.05" height="0.2" color="#FFA500" rotation="90 0 0"></a-cone>
      <a-cone position="0 0.9 0.1" radius-bottom="0.15" radius-top="0" height="0.2" color="#FF0000"></a-cone>
    </a-entity>

    <!-- Camera Rig -->
    <a-entity id="rig" position="0 0 0">
      <a-camera position="0 1.6 0" look-controls wasd-controls></a-camera>
    </a-entity>
  </a-scene>
</body>
</html>
